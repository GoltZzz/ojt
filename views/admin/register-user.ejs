<%- layout('layouts/boilerplate') %>
<link rel="stylesheet" href="/css/dashboard.css" />
<link rel="stylesheet" href="/css/admin-register.css" />

<div class="dashboard-container">
	<div class="welcome-section">
		<h1>Register New User</h1>
		<p>Create a new account for a user</p>
	</div>

	<div class="dashboard-card">
		<div class="row">
			<div class="col-md-7">
				<div class="register-form-container">
					<form
						class="needs-validation"
						action="/admin/register-user"
						method="POST"
						novalidate>
						<div class="row g-3">
							<div class="col-md-6">
								<label for="firstName" class="form-label">First Name</label>
								<input
									type="text"
									class="form-control"
									id="firstName"
									name="firstName"
									required
									autofocus />
								<div class="invalid-feedback">First name is required</div>
							</div>
							<div class="col-md-6">
								<label for="middleName" class="form-label">Middle Name</label>
								<input
									type="text"
									class="form-control"
									id="middleName"
									name="middleName" />
								<div class="form-text">Optional</div>
							</div>
							<div class="col-12">
								<label for="lastName" class="form-label">Last Name</label>
								<input
									type="text"
									class="form-control"
									id="lastName"
									name="lastName"
									required />
								<div class="invalid-feedback">Last name is required</div>
							</div>
							<div class="col-12">
								<label for="username" class="form-label">Username</label>
								<div class="input-group">
									<span class="input-group-text"
										><i class="fas fa-user"></i
									></span>
									<input
										type="text"
										class="form-control"
										id="username"
										name="username"
										required />
								</div>
								<div class="invalid-feedback">Username is required</div>
							</div>
							<div class="col-12">
								<label for="password" class="form-label">Password</label>
								<div class="input-group">
									<span class="input-group-text"
										><i class="fas fa-lock"></i
									></span>
									<input
										type="password"
										class="form-control"
										id="password"
										name="password"
										required
										minlength="8" />
									<button
										class="btn btn-outline-secondary toggle-password"
										type="button">
										<i class="fas fa-eye"></i> Show
									</button>
								</div>
								<div class="invalid-feedback">
									Password must be at least 8 characters
								</div>
							</div>
							<div class="col-12">
								<label for="role" class="form-label">User Role</label>
								<select class="form-select" id="role" name="role" required>
									<option value="user" selected>Regular User</option>
									<option value="admin">Administrator</option>
								</select>
								<div class="form-text">
									<i class="fas fa-info-circle"></i> Regular users can only
									access Weekly Report, Documentation, and Time Report features.
								</div>
							</div>
							<div class="col-12 mt-4">
								<div class="d-flex justify-content-between">
									<a href="/admin/users" class="btn btn-outline-secondary">
										<i class="fas fa-arrow-left"></i> Back to Users
									</a>
									<button type="submit" class="btn btn-primary">
										<i class="fas fa-user-plus"></i> Register User
									</button>
								</div>
							</div>
						</div>
					</form>
				</div>
			</div>
			<div class="col-md-5">
				<div class="register-info-container">
					<div class="info-card">
						<h3><i class="fas fa-info-circle"></i> About User Registration</h3>
						<p>
							Create new user accounts for students or administrators who need
							access to the OJT reporting system.
						</p>

						<h4><i class="fas fa-user"></i> User Roles</h4>
						<div class="role-info">
							<div class="role-item">
								<span class="badge bg-primary">Regular User</span>
								<ul>
									<li>Can create and edit their own reports</li>
									<li>
										Access to Weekly Report, Documentation, and Time Report
									</li>
									<li>Cannot view or approve other users' reports</li>
								</ul>
							</div>
							<div class="role-item">
								<span class="badge bg-danger">Administrator</span>
								<ul>
									<li>Full access to all system features</li>
									<li>Can view, approve, and archive reports</li>
									<li>Can manage user accounts</li>
								</ul>
							</div>
						</div>

						<div class="security-note">
							<h4><i class="fas fa-shield-alt"></i> Security Note</h4>
							<p>
								Make sure to use strong passwords and share credentials securely
								with new users.
							</p>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<script>
	// Password visibility toggle
	document.addEventListener("DOMContentLoaded", function () {
		const togglePassword = document.querySelector(".toggle-password");
		const passwordInput = document.querySelector("#password");

		togglePassword.addEventListener("click", function () {
			const type =
				passwordInput.getAttribute("type") === "password" ? "text" : "password";
			passwordInput.setAttribute("type", type);

			// Toggle icon
			const icon = this.querySelector("i");
			icon.classList.toggle("fa-eye");
			icon.classList.toggle("fa-eye-slash");
		});

		// Form validation
		const form = document.querySelector(".needs-validation");
		form.addEventListener("submit", function (event) {
			if (!form.checkValidity()) {
				event.preventDefault();
				event.stopPropagation();
			}
			form.classList.add("was-validated");
		});
	});
</script>
